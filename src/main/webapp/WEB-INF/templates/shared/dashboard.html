<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="ISO-8859-1" />
<title>Dashboard</title>
<link rel="stylesheet" type="text/css"
	href="../css/jquery.mobile-1.4.2.min.css" />
<link rel="stylesheet" type="text/css"
	href="../css/jquery.mobile.external-png-1.4.2.min.css" />
<link rel="stylesheet" type="text/css"
	href="../css/jquery.mobile.icons-1.4.2.min.css" />
<link rel="stylesheet" type="text/css"
	href="../css/jquery.mobile.inline-png-1.4.2.min.css" />
<link rel="stylesheet" type="text/css"
	href="../css/jquery.mobile.inline-svg-1.4.2.min.css" />
<link rel="stylesheet" type="text/css"
	href="../css/jquery.mobile.structure-1.4.2.min.css" />
<link rel="stylesheet" type="text/css"
	href="../css/jquery.mobile.theme-1.4.2.min.css" />
<link rel="stylesheet" type="text/css"
	href="../css/themes/themeRoller.min.css" />

<script language="JavaScript" type="text/javascript"
	src="../javascript/jquery-2.1.1.min.js"></script>
<script type="text/javascript">
	$(document).bind("mobileinit", function() {
		$.mobile.ajaxEnabled = false;
	});
</script>
<script type="text/javascript"
	src="../javascript/jquery.mobile-1.4.2.min.js"></script>
<link rel="stylesheet" type="text/css" th:href="@{/css/common.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/css/dashboard.css}" />
<script type="text/javascript" th:src="@{/javascript/dashboard.js}"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript"
	src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.8/src/markerwithlabel.js"></script>
</head>
<body>
	<div data-role="page" id="page">
		<div data-role="header" data-theme="a">
			<h1 th:text="${currentRace.race_name}" id="raceName"></h1>
			<button disabled=""
				class="ui-btn ui-btn-inline ui-icon-user ui-btn-icon-left"
				sec:authentication="name">User</button>
			<a th:href="@{/j_spring_security_logout}" data-icon="power"
				class="ui-btn-right">Logout</a>
		</div>

		<div data-role="content">

			<div class="ui-content" id="map-canvas">
				<!-- map loads here... -->
			</div>

			<form>
				<fieldset data-role="controlgroup" data-type="horizontal">
					<input type="checkbox" name="checkbox-h-2a" id="checkbox-h-2a"/>
					<label for="checkbox-h-2a">Autocenter</label>					
				</fieldset>
			</form>

			<div id="raceDetails">
				<span th:text="${currentRace.race_start}" id="raceStartTime" class="hiddenField"></span>
				Race duration: <span id="durationHour"></span>h <span id="durationMin"> </span>m
			</div>

			<div>
				<div class="weather">
					<div style="width: 300px;">
						<iframe style="display: block;"
							src="http://cdn1.willyweather.com.au/widget/loadView.html?id=13158"
							width="300" height="228" frameborder="0" scrolling="no"></iframe>
						<a
							style="height: 20px; text-indent: -9999em; z-index: 1; margin: -20px 0 0 0; display: block; position: relative"
							href="http://www.willyweather.com.au/sa/adelaide/adelaide.html">weather
							for Adelaide</a>
					</div>
				</div>

				<div class="statisticTable"
					th:replace="shared/statisticTable :: statTable"></div>
				<div class="endAndNotes">
					<div>
						<a href="#messageAndNotes" data-rel="close"><button
								data-icon="edit">Message and Notes</button></a>
					</div>
					<div id="endRaceContainer">
						<div sec:authorize="hasRole('ROLE_ADMIN')">
							<a href="#endRaceDiv" data-rel="popup" data-position-to="window"
								data-transition="pop"
								class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-delete ui-btn-icon-left ui-btn-b">End
								Race</a>
						</div>
						<div data-role="popup" id="endRaceDiv" data-overlay-theme="b"
							data-theme="b" data-dismissible="false" style="max-width: 400px;">
							<div data-role="header" data-theme="a">
								<h1>End Race</h1>
							</div>
							<div role="main" class="ui-content">
								<h3 class="ui-title">Are you sure you want to end this
									race?</h3>
								<p>This action cannot be undone.</p>
								<a href="#"
									class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b"
									data-rel="back">Cancel</a> <a href="#" id="endRaceBtn"
									class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b"
									data-rel="back" data-transition="flow">End</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div class="msgAndNotes" data-role="panel" id="messageAndNotes">
			<div class="messageContainer" sec:authorize="hasRole('ROLE_ADMIN')">
				<span>Message: &nbsp;</span>
				<textarea rows="5" cols="45" id="messageTxt"></textarea>
				<div class="ui-grid-b">

					<button id="left" class="msgTemplate ui-block-a">Left</button>
					<button id="right" class="msgTemplate ui-block-b">Right</button>

					<button id="breakAway" class="msgTemplate ui-block-a">Break
					</button>
					<button id="timeGap" class="msgTemplate ui-block-b">Time
						gap</button>

					<button id="safety" class="msgTemplate ui-block-b">Safety</button>
				</div>
				<button id="sendMsg">Send</button>
				<button id="msgClearBtn">Reset</button>
			</div>
			<div class="notesContainer" sec:authorize="hasRole('ROLE_ADMIN')">
				<span>Notes: &nbsp;</span>
				<textarea rows="5" cols="45" id="notesTxt"></textarea>
				<button id="saveNote">Save</button>
				<button id="notesClearBtn">Reset</button>
			</div>
			<a href="downloadLogs" target="_blank">
				<button id="downloadMsgNotes"
					class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-arrow-d">
					Messages and Notes</button>
			</a>
		</div>

	</div>
</body>
</html>